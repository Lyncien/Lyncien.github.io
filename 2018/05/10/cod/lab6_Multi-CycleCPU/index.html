<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Lyncien">



<meta name="description" content="实验目的 实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。 运行一个计算斐波那契数列的程序，初始为3，3。  实验平台 ISE 14.7  实验过程（分析） 模块化设计，主要有以下几个模块  a) alu模块——算术逻辑单元  b) regfile模块——寄存器文件  c)    mux模块和mux4模块——2路和4路选择器  d)">
<meta name="keywords" content="Verilog,COD">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机组成原理上机实验6 多周期CPU">
<meta property="og:url" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/index.html">
<meta property="og:site_name" content="Lyncien&#39;s homepage">
<meta property="og:description" content="实验目的 实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。 运行一个计算斐波那契数列的程序，初始为3，3。  实验平台 ISE 14.7  实验过程（分析） 模块化设计，主要有以下几个模块  a) alu模块——算术逻辑单元  b) regfile模块——寄存器文件  c)    mux模块和mux4模块——2路和4路选择器  d)">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic1.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic2.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic3.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic4.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic5.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic6.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic7.png">
<meta property="og:updated_time" content="2019-02-19T11:09:37.154Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="计算机组成原理上机实验6 多周期CPU">
<meta name="twitter:description" content="实验目的 实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。 运行一个计算斐波那契数列的程序，初始为3，3。  实验平台 ISE 14.7  实验过程（分析） 模块化设计，主要有以下几个模块  a) alu模块——算术逻辑单元  b) regfile模块——寄存器文件  c)    mux模块和mux4模块——2路和4路选择器  d)">
<meta name="twitter:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic1.png">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Lyncien&#39;s homepage" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>计算机组成原理上机实验6 多周期CPU | Lyncien&#39;s homepage</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: false
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head></html>
<script src="/js/head-pic.js" ></script> <!-- head-pic-flash by Lyncien -->
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic" id="head-pic"> <!-- head-pic-flash by Lyncien -->
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Lyncien</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:Lyncien@126.com" title="Email"></a>
                            
                                <a class="fa Leetcode" href="https://leetcode-cn.com/lyncien/" title="Leetcode"></a>
                            
                                <a class="fa GitHub" href="https://github.com/Lyncien" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COD/">COD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Compiler/">Compiler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DS/">DS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hackergame2018/">Hackergame2018</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MCPS/">MCPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PC/">PC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Verilog/">Verilog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感想/">感想</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Lyncien</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic" id="head-pic-mobile"> <!-- head-pic-flash by Lyncien -->
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Lyncien</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:Lyncien@126.com" title="Email"></a>
                            
                                <a class="fa Leetcode" target="_blank" href="https://leetcode-cn.com/lyncien/" title="Leetcode"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/Lyncien" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-cod/lab6_Multi-CycleCPU" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/10/cod/lab6_Multi-CycleCPU/" class="article-date">
      <time datetime="2018-05-09T16:00:00.000Z" itemprop="datePublished">2018-05-10</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      计算机组成原理上机实验6 多周期CPU
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/COD/">COD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Verilog/">Verilog</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h2><ol>
<li>实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。</li>
<li>运行一个计算斐波那契数列的程序，初始为3，3。</li>
</ol>
<h2 id="实验平台"><a href="#实验平台" class="headerlink" title="实验平台"></a>实验平台</h2><ul>
<li>ISE 14.7</li>
</ul>
<h2 id="实验过程（分析）"><a href="#实验过程（分析）" class="headerlink" title="实验过程（分析）"></a>实验过程（分析）</h2><ol>
<li><p>模块化设计，主要有以下几个模块</p>
<p> a) alu模块——算术逻辑单元</p>
<p> b) regfile模块——寄存器文件</p>
<p> c)    mux模块和mux4模块——2路和4路选择器</p>
<p> d)    IP核生成的Mem模块——存放数据段和代码段</p>
<p> e)    nextpclogic模块——计算下一个PC</p>
<p> f)    dff模块——D触发器，用于多周期各段寄存</p>
<p> g)    control模块——FSM控制regfile、IMem、DMem、nextpclogic和alu</p>
<p> h)    top模块——实例化前几个模块，连接各个信号</p>
</li>
<li><p>alu模块使用case语句判断8种操作类型。</p>
</li>
<li><p>regfile模块用组合逻辑读，时序逻辑写。</p>
</li>
<li><p>Mem是同步读，同步写，且由指定coe文件初始化，coe文件的内容是16进制文本，由Mars编译一个汇编代码生成。</p>
</li>
<li><p>nextpclogic模块通过组合逻辑计算出nextPC的值。</p>
</li>
<li><p>dff模块用一个always在时钟沿触发实现非阻塞赋值。</p>
</li>
<li><p>control模块内实现一个有限状态机，三段式实现：</p>
<p> （1）时钟上升沿，改变当前状态，cstate&lt;=nstate</p>
<p> （2）组合逻辑根据当前状态和指令计算次态nstate</p>
<p> （3）时钟下降沿，根据次态nstate，更新各控制信号（将在下一个上升沿起作用），下一周期需要使用的信号置为对应值，不使用的选择信号置x，不使用的使能置0。</p>
<p> 控制信号如下表：</p>
<p> | 状态 | S15 | S0 | S1 | S2 | S3 | S4 | S5 | S6 | S7 | S8 | S9 | S10 | S11 |<br> | — | — | — | — | — | — | — | — | — | — | — | — | — | — |<br> |   功能信号 | Rst | Start | Instr decode | MM addr | MM read | read WB | MM write | R-type EXE | R-type WB | Beq | Addi EXE | Addi WB | Jump |<br> | LorD | 0 | 0 | x | x | 1 | x | 1 | x | x | x | x | x | x |<br> | MemRead |  | 1 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |<br> | MemWrite |  | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 |<br> | IRWrite |  | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |<br> | RegDst |  | x | x | x | x | 0 | x | x | 1 | x | x | 0 | x |<br> | MemtoReg |  | x | x | x | x | 1 | x | x | 0 | x | x | 0 | x |<br> | RegWrite |  | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 1 | 0 | 0 | 1 | 0 |<br> | ALUSrcASel |  | 0 | 0 | 1 | x | x | x | 1 | x | 1 | 1 | x | x |<br> | ALUSrcBSel |  | 01 | 11 | 10 | xx | xx | xx | 00 | xx | 00 | 10 | xx | xx |<br> | ALUControl |  | 001 | 001 | 001 | xxx | xxx | xxx | ② | xxx | 010 | 001 | xxx | xxx |<br> | Branch |  | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 |<br> | PCWrite | 1 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 |<br> | PCSrc | 11① | 00 | xx | xx | xx | xx | xx | xx | xx | 01 | xx | xx | 10 |<br> 注：①rst状态下PCSrc=11，利用4路选择器的剩余1路，置初始nextPC=0.</p>
<p> ②根据Funct具体设置不同的ALUControl<br> ​<br> 状态机如下：</p>
</li>
</ol>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic1.png" alt=""> </p>
<ol start="8">
<li><p>top模块实例化其他所有模块，连接各个信号。</p>
</li>
<li><p>bgtz的实现：bgtz是伪指令（类似地有la和li），不是MIPS指令集的指令，编译时会进行处理，转换为几条指令实现。</p>
<p> 这里我用以下三条指令</p>
<pre><code> slt $t6,$zero,$t1     # if $t1 &gt; 0, that $t6 = 1, else $t6 = 0
 addi $t7,$zero,1      # set $t7 = 1
 beq $t6,$t7,loop      # jump if $t6 = 1, that is to say, $t1 &gt; 0
</code></pre><p> 实现</p>
<pre><code> bgtz $t1, loop        # repeat if not finished yet.
</code></pre></li>
</ol>
<ol start="10">
<li><p>ram模块的初始化</p>
<p>IP核选择Block Memory，设置为Single Port RAM，</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic2.png" alt=""> </p>
<p>宽度为32，深度为256</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic3.png" alt=""> </p>
<p>选中Load Init File设置，选择初始化coe文件的路径，</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic4.png" alt=""> </p>
<p>其中coe文件内容为（Text段为0-63，Data段为64-255）</p>
<pre><code>MEMORY_INITIALIZATION_RADIX=16;
MEMORY_INITIALIZATION_VECTOR=
20080100
200d0150
8dad0000
200b0154
8d6b0000
200c0154
8d8c0004
ad0b0000
ad0c0004
21a9fffe
8d0b0000
8d0c0004
016c5020
ad0a0008
21080004
2129ffff
0009702a
200f0001
11cffff7
08000013
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000014
00000003
00000003
…
</code></pre></li>
<li><p>完整的数据通路</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic5.png" alt=""> </p>
</li>
<li><p>分析结果</p>
<pre><code>.data
fibs: .word   0 : 20        # &quot;array&quot; of  20 words to contain fib values
size: .word  20             # size of &quot;array&quot; 
temp: .word 3 3
.text
      la   $t0, fibs        # load address of array
      la   $t5, size        # load address of size variable
      lw   $t5, 0($t5)      # load array size
      la   $t3, temp        # load 
      lw   $t3, 0($t3)
      la   $t4, temp
      lw   $t4, 4($t4)

      sw   $t3, 0($t0)      # F[0] = $t3
      sw   $t4, 4($t0)      # F[1] = $t4
      addi $t1, $t5, -2     # Counter for loop, will execute (size-2) times
loop: lw   $t3, 0($t0)      # Get value from array F[n] 
      lw   $t4, 4($t0)      # Get value from array F[n+1]
      add  $t2, $t3, $t4    # $t2 = F[n] + F[n+1]
      sw   $t2, 8($t0)      # Store F[n+2] = F[n] + F[n+1] in array
      addi $t0, $t0, 4      # increment address of Fib. number source
      addi $t1, $t1, -1     # decrement loop counter
      slt $t6,$zero,$t1     # if $t1 &gt; 0, that $t6 = 1, else $t6 = 0
      addi $t7,$zero,1      # set $t7 = 1
      beq $t6,$t7,loop      # jump if $t6 = 1, that is to say, $t1 &gt; 0
out:  
    j out
</code></pre><p>完整汇编代码如上，可知程序先向内存数据段读取数组首地址（<code>$t0</code>）和大小（<code>$t5</code>，循环次数），读取并写入f[0]=3, f[1]=3，然后循环18次，执行f[i]=f[i-1]+f[i-2]计算斐波那契数列。</p>
<p>如果CPU编写正确，Mem [0-19]（由于Data和Text在同一个Ram，故实际上是在64-83）内容将是3、3、6、9、15、24、39、63、102、165、267、432、699、1131、1830、2961、4791、7752、12543、20295</p>
<p>Reg内容将是：</p>
<p>$t0：最后一次循环后数组基址——256+4*18=328</p>
<p>$t1：剩余循环次数——0</p>
<p>$t2：最后一次的计算结果——20295</p>
<p>$t3：最后一次的计算数1——7752</p>
<p>$t4：最后一次的计算数2——12543</p>
<p>$t5：数组大小——20</p>
<p>$t6：最后一次不跳转——0</p>
<p>$t7：1</p>
</li>
</ol>
<h2 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h2><ul>
<li><p>仿真结果：</p>
<p>  仿真得Mem和reg数据为</p>
<p>  <img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic6.png" alt=""> </p>
<p>  Mem              </p>
<p>  <img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic7.png" alt=""> </p>
<p>  Regfile</p>
<p>  可见运行结果符合分析。</p>
</li>
</ul>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录:"></a>附录:</h2><ul>
<li><p>编写过程中遇到问题和一些发现</p>
<ol>
<li><p>如果位拼接作为左值，单个变量也要花括号，如</p>
<pre><code> `{{RegDst},{ALUSrc},{MemtoReg},{RegWrite},{MemWrite},{Branch},{ALUOp[1:0]},{Jump}}=9&#39;b100100100;`
</code></pre><p> 当然，本次实验中，我没有用位拼接赋值，这样写一行太长了，也不够清晰。</p>
</li>
<li>“==”会严格匹配每一位，比如module内5位数字比较（一个常量，一个input），但外部传入的是3位的，高位自动拓展好像是x，就导致“==”不成立，这是一个不好发现的问题。</li>
<li>仿真遇到高阻态，多半是这个信号不存在，经常是拼写错了，有时候ise检查不出来。</li>
<li>发现如果Mars的memory configuration设置为默认，则编译后导出代码里面的所有la（给某个寄存器赋值一个32位地址）被翻译为连续两句lui和ori；若memory configuration设置为text at address 0则编译后导出代码里面的所有la被翻译为一句addi。我觉得原因是text地址从0 开始的话，如果text部分较短，地址非0部分未超过16位，那么la只需要给低16位赋值就行了，就可以直接用addi实现（addi指令末16位为立即数）。如果地址是实打实的32位那addi就无能为力了，这时候需要lui给高16位赋值，低16位用ori（ori的rs取$0，作用就和addi一样）。</li>
<li>在top里的wire信号，如果通过control模块（或其他模块）进行控制，那么这个信号不能直接在top里赋初值，要到仿真模块里赋值，不然control里改变这个信号的值时，会变成不确定。</li>
<li>在clk边缘用&lt;=对某信号（如state）进行赋值时，如果同时刻需要对该信号进行判断（如状态机，根据状态以完成对应操作），则判断时信号的值是本次改变前的。（非阻塞赋值的特性体现）</li>
</ol>
</li>
</ul>
<ul>
<li><p>模块源代码</p>
<ul>
<li>top.v</li>
</ul>
<pre><code class="verilog">module top( //顶层模块
    input clk,
    input rst_n,
    );

    wire ALUSrcASel;
    wire [1:0] ALUSrcBSel;
    wire [31:0] ALUSrcA;
    wire [31:0] ALUSrcB;
    wire [2:0] ALUControl;
    wire [31:0] ALUResult;
    wire [31:0] ALUResult_DFF; //加_DFF表示对应D触发器的输出，下同
    wire Zero;

    wire [31:0] SignExtented;

    wire [5:0] RegRdaddr1;
    wire [31:0] RegRdout1;
    wire [31:0] RegRdout1_DFF;
    wire [5:0] RegRdaddr2;
    wire [31:0] RegRdout2;
    wire [31:0] RegRdout2_DFF;
    wire [5:0] RegWdaddr;   
    wire [31:0] RegWdin;
    wire RegWrite;
    wire RegDst;

    wire [31:0] Memaddr_src; //这是计算出来的访存地址
    wire [31:0] Memaddr; //这是计算出来的访存地址右移了两位，原因见下面
    wire [31:0] Memout;
    wire [31:0] Memin;
    wire MemRead;
    wire MemWrite;
    wire MemtoReg;

    wire [31:0] Instr;
    wire [31:0] Data;

    wire [31:0] PC;
    wire [31:0] nextPC;

    wire PCEn;
    wire PCWrite;
    wire LorD;
    wire IRWrite;

    wire [5:0] Funct;
    wire [15:0] IMM16;
    wire [4:0] Rd;
    wire [4:0] Rt;
    wire [4:0] Rs;
    wire [5:0] Op;

    wire [25:0] JumpIMM;
    wire [1:0] PCSrc;

    wire Branch;
    //以上信号基本按数据通路图的命名，意义很明显，不多做注释了

    //=======================PC========================

    nextpclogic nextpclogic(PC,PCWrite,PCSrc,JumpIMM,Branch,Zero,ALUResult,ALUResult_DFF,nextPC,PCEn);  
    dff DFFPC(~clk,nextPC,PC,PCEn);

    mux MUXPCALUout(LorD,PC,ALUResult_DFF,Memaddr_src);

    //=======================Memory========================
    assign Memaddr = Memaddr_src &gt;&gt; 2;//&gt;&gt;2是因为这里Mem是每个地址存储4字节，和实际上的（一地址一字节）不一样
    Mem Mem(clk,MemWrite,Memaddr,Memin,Memout); 

    dff DFFInstr(~clk,Memout,Instr,IRWrite);
    dff DFFData(~clk,Memout,Data,1&#39;b1);

    assign JumpIMM = Instr[25:0];
    assign Funct = Instr[5:0];
    assign IMM16 = Instr[15:0];
    assign Rd = Instr[15:11];
    assign Rt = Instr[20:16];
    assign Rs = Instr[25:21];
    assign Op = Instr[31:26];

    assign Memin = RegRdout2_DFF;

    //=======================Regfile========================
    assign RegRdaddr1 = Rs;
    assign RegRdaddr2 = Rt;
    mux #(6) MUXRegWdaddr(RegDst,{1&#39;b0,Rt},{1&#39;b0,Rd},RegWdaddr);
    mux MUXMemtoReg(MemtoReg,ALUResult_DFF,Data,RegWdin);
    regfile regfile(clk,rst_n,RegRdaddr1,RegRdout1,RegRdaddr2,RegRdout2,RegWdaddr,RegWdin,RegWrite);
    dff DFFRegRdout1(~clk,RegRdout1,RegRdout1_DFF,1&#39;b1);
    dff DFFRegRdout2(~clk,RegRdout2,RegRdout2_DFF,1&#39;b1);

    //=========================ALU==========================
    assign SignExtented = {{16{IMM16[15]}},IMM16};
    mux MUXALUSrcA(ALUSrcASel,PC,RegRdout1_DFF,ALUSrcA);
    mux4 MUXALUSrcB(ALUSrcBSel,RegRdout2_DFF,4,SignExtented,SignExtented &lt;&lt; 2,ALUSrcB);
    alu alu(ALUSrcA,ALUSrcB,{2&#39;b00,{ALUControl}},ALUResult,Zero,Sign);
    dff DFFALUResult(~clk,ALUResult,ALUResult_DFF,1&#39;b1);

    //=======================Control========================
    control control(clk,rst_n,Op,Funct,LorD,MemRead,MemWrite,IRWrite,RegDst,MemtoReg,RegWrite,ALUSrcASel,ALUSrcBSel,ALUControl,Branch,PCWrite,PCSrc,tcstate);   
endmodule 
</code></pre>
<ul>
<li>alu.v</li>
</ul>
<pre><code class="verilog">parameter A_NOP =5&#39;h00; //nop
parameter A_ADD =5&#39;h01; //sign_add
parameter A_SUB =5&#39;h02; //sign_sub
parameter A_AND =5&#39;h03; //and
parameter A_OR  =5&#39;h04; //or
parameter A_XOR =5&#39;h05; //xor
parameter A_NOR =5&#39;h06; //nor
parameter A_SLT =5&#39;h07; //slt

module alu(
      input [31:0] alu_a,
      input [31:0] alu_b,
      input [4:0] alu_op,
      output reg [31:0] alu_out,
       output zero
      );
      assign zero = (alu_out == 32&#39;b0)?1:0;
      always@(*)
          case (alu_op)
              A_NOP: alu_out = 0;
              A_ADD: alu_out = alu_a + alu_b;
              A_SUB: alu_out = alu_a - alu_b;
              A_AND: alu_out = alu_a &amp; alu_b;
              A_OR : alu_out = alu_a | alu_b;
              A_XOR: alu_out = alu_a ^ alu_b;
              A_NOR: alu_out = ~(alu_a | alu_b);
              A_SLT: //if a&lt;b(signed) return 1 else return 0;
                  begin
                      if(alu_a[31] == alu_b[31]) alu_out = (alu_a &lt; alu_b) ? 32&#39;b1 : 32&#39;b0;
                      //同号情况，后面的小于是视为无符号的比较
                      else alu_out = (alu_a[31] &lt; alu_b[31]) ? 32&#39;b0 : 32&#39;b1;
  //有符号比较符号
                  end         
              default: ;
          endcase
endmodule
</code></pre>
<ul>
<li>regfile.v</li>
</ul>
<pre><code class="verilog">module regfile( //寄存器文件
      input   clk,
      input rst_n,
      input [5:0] rAddr1,//读地址1
      output [31:0] rDout1,//读数据1
      input [5:0] rAddr2,//读地址2
      output [31:0] rDout2,//读数据2
      input [5:0] wAddr,//写地址
      input [31:0] wDin,//写数据
      input wEna//写使能

  );
      reg [31:0] data [0:63];
      integer i;
      assign rDout1=data[rAddr1];//读1
      assign rDout2=data[rAddr2];//读2
      always@(posedge clk or negedge rst_n)//写和复位
          if(~rst_n)
          begin
              for(i=0; i&lt;64; i=i+1) data[i]&lt;=0;
          end
          else
          begin
              if(wEna)
                  data[wAddr]&lt;=wDin;
          end
endmodule
</code></pre>
<ul>
<li>nextpclogic.v</li>
</ul>
<pre><code class="verilog">module nextpclogic( //生成下一个PC
      input [31:0] PC,
      input PCWrite,
      input [1:0] PCSrc,
      input [25:0] JumpIMM,
      input Branch,
      input Zero,
      input [31:0] ALUResult,
      input [31:0] ALUResult_DFF,
      output [31:0] nextPC,
      output PCEn
     );

      wire [31:0] ShiftLeft2;
      wire [31:0] PCJump;
      wire tmp;
      assign ShiftLeft2 = JumpIMM &lt;&lt; 2;
      assign PCJump = {{PC[31:28]},{{2'b00,JumpIMM}<<2}}; mux4="" muxpc(pcsrc,aluresult,aluresult_dff,pcjump,0,nextpc);="" and(tmp,branch,zero);="" or(pcen,tmp,pcwrite);="" endmodule="" <="" code=""></2}};></code></pre>
<ul>
<li>dff.v</li>
</ul>
<pre><code class="verilog">module dff #(parameter WIDTH = 32) ( //Data Flip-Flop 
      input clk,
      input [WIDTH-1:0] datain,
      output reg [WIDTH-1:0] dataout,
      input en
      );
      always@(posedge clk)
      begin
          if(en)
              dataout &lt;= datain;
      end
endmodule
</code></pre>
<ul>
<li>mux.v</li>
</ul>
<pre><code class="verilog">module mux #(parameter WIDTH = 32)( //2路选择器
    input sel,
      input [WIDTH-1:0] d0,
      input [WIDTH-1:0] d1,
      output [WIDTH-1:0] out
      );
      assign out = (sel == 1&#39;b1 ? d1 : d0);
endmodule
</code></pre>
<ul>
<li>mux4.v<pre><code class="verilog">module mux4 #(parameter WIDTH = 32)( //4路选择器
  input [1:0] sel,
  input [WIDTH-1:0] d0,
  input [WIDTH-1:0] d1,
   input [WIDTH-1:0] d2,
   input [WIDTH-1:0] d3,
  output reg [WIDTH-1:0] out
  );
  always@(*)
      case(sel)
          2&#39;b00: out=d0;
          2&#39;b01: out=d1;
          2&#39;b10: out=d2;
          2&#39;b11: out=d3;
          default:;
      endcase
endmodule
</code></pre>
</li>
<li><p>control.v<br><code>`</code>verilog<br>module control( //控制模块，各信号的控制<br>  input clk,rst_n,<br>  input [5:0] Op, //instr[31:26]<br>  input [5:0] Funct,//instr[5:0]<br>  output reg LorD,<br>  output reg MemRead,<br>  output reg MemWrite,<br>  output reg IRWrite,<br>  output reg RegDst,<br>  output reg MemtoReg,<br>  output reg RegWrite,<br>  output reg ALUSrcASel,<br>  output reg [1:0] ALUSrcBSel,<br>  output reg [2:0] ALUControl,<br>  output reg Branch,<br>  output reg PCWrite,<br>  output reg [1:0] PCSrc,<br>  output [3:0] tcstate<br>  );<br>  reg [3:0] cstate;<br>  reg [3:0] nstate;</p>
<p>  assign tcstate=cstate;<br>  always @(posedge clk or negedge rst_n)//上升沿改变状态</p>
<pre><code>  if(~rst_n) cstate &lt;= 4&#39;d15;//reset状态
  else cstate &lt;= nstate;
</code></pre><p>  always @(*)//计算次态</p>
<pre><code>  case(cstate)
      4&#39;d15://reset
          nstate = 4&#39;d0;
      4&#39;d0://fetch 
          nstate = 4&#39;d1;
      4&#39;d1://decode
          case(Op)
              6&#39;b000000: nstate = 4&#39;d6;//R type
              6&#39;b100011: nstate = 4&#39;d2;//lw
              6&#39;b101011: nstate = 4&#39;d2;//sw
              6&#39;b000100: nstate = 4&#39;d8;//beq  
              6&#39;b000010: nstate = 4&#39;d9;//jump
              6&#39;b001000: nstate = 4&#39;d10;//addi
          endcase
      4&#39;d2: //memaddr
          case(Op)
              6&#39;b100011: nstate = 4&#39;d3;//lw
              6&#39;b101011: nstate = 4&#39;d5;//sw
          endcase
      4&#39;d3: //memread
          nstate = 4&#39;d4;
      4&#39;d4: //memwriteback
          nstate = 4&#39;d0;
      4&#39;d5: //memwrite
          nstate = 4&#39;d0;
      4&#39;d6: //execute
          nstate = 4&#39;d7;
      4&#39;d7: //aluwriteback
          nstate = 4&#39;d0;
      4&#39;d8: //branch
          nstate = 4&#39;d0;
      4&#39;d9: //jump
          nstate = 4&#39;d0;
      4&#39;d10: //addi execute
          nstate = 4&#39;d11;
      4&#39;d11: //addi writeback
          nstate = 4&#39;d0;
  endcase 
</code></pre><p>  //根据下一状态更改控制信号（有使用的信号将更改并做注释，不使用的选择信号置x,不使用的使能置0）<br>  //这里虽然在下降沿更改，但信号将在下一周期（上升沿）起作用(也就是同在这个下降沿的操作读取到的信号是改变前的)<br>  always @(negedge clk or negedge rst_n)//下降沿时，根据次态，更改信号<br>  begin<br>  if(~rst_n) </p>
<pre><code>  begin
      LorD = 1&#39;b0;
      PCSrc = 2&#39;b11; //nextPC=0; 利用4路选择器的剩余1路
      PCWrite = 1&#39;b1;
  end
</code></pre><p>  else</p>
<pre><code>  case(nstate)
      4&#39;d0://fetch 
          begin
              LorD = 1&#39;b0; //------Memaddr: PC
              MemRead = 1&#39;b1; //------enable Mem read
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b1; //------enable save Instr
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx;
              RegWrite = 1&#39;b0;
              ALUSrcASel = 1&#39;b0; //------srcA: PC
              ALUSrcBSel = 2&#39;b01; //------srcB: 4
              ALUControl = 3&#39;b001; //------ALU&#39;s func: add
              Branch = 1&#39;b0;
              PCWrite = 1&#39;b1; //------enable update PC
              PCSrc = 2&#39;b00; //------select nextPC=PC+4

          end
      4&#39;d1://decode
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;b0; //------srcA: PC
              ALUSrcBSel = 2&#39;b11; //------srcB: SignExtended&lt;&lt;2
              ALUControl = 3&#39;b001; //------ALU&#39;s func: add
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx;  
          end
      4&#39;d2: //memaddr
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;b1; //------srcA: RegRdout1_DFF
              ALUSrcBSel = 2&#39;b10; //------srcB: SignExtended
              ALUControl = 3&#39;b001; //------ALU&#39;s func: add
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx; 
          end
      4&#39;d3: //memread
          begin
              LorD = 1&#39;b1; //------Memaddr: ALUResult_DFF
              MemRead = 1&#39;b1; //------enable Mem read
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;bx; 
              ALUSrcBSel = 2&#39;bxx; 
              ALUControl = 3&#39;bxxx; 
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx;  
          end
      4&#39;d4: //memwriteback
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;b0; //------RegWdaddr: Rt
              MemtoReg = 1&#39;b1; //------RegWdin: Memout
              RegWrite = 1&#39;b1; //------enable Reg write
              ALUSrcASel = 1&#39;bx; 
              ALUSrcBSel = 2&#39;bxx; 
              ALUControl = 3&#39;bxxx; 
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx; 
          end
      4&#39;d5: //memwrite
          begin
              LorD = 1&#39;b1; //------Memaddr: ALUResult_DFF
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b1; //------enable Mem write
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;bx; 
              ALUSrcBSel = 2&#39;bxx; 
              ALUControl = 3&#39;bxxx; 
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx; 
          end
      4&#39;d6: //R type execute
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;b1; //------srcA: RegRdout1_DFF
              ALUSrcBSel = 2&#39;b00; //------srcB: RegRdout2_DFF
              case(Funct) //------ALU&#39;s func: decided by &#39;Funct&#39;
                  6&#39;b100000: ALUControl = 5&#39;h01;//add
                  6&#39;b100010: ALUControl = 5&#39;h02;//sub
                  6&#39;b100100: ALUControl = 5&#39;h03;//and
                  6&#39;b100101: ALUControl = 5&#39;h04;//or
                  6&#39;b100110: ALUControl = 5&#39;h05;//xor
                  6&#39;b100111: ALUControl = 5&#39;h06;//nor     
                  6&#39;b101010: ALUControl = 5&#39;h07;//slt
              endcase
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx; 
          end
      4&#39;d7: //aluwriteback
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;b1; //------RegWdaddr: Rd
              MemtoReg = 1&#39;b0; //------RegWdin: ALUResult_DFF
              RegWrite = 1&#39;b1; //------enable Reg write
              ALUSrcASel = 1&#39;bx; 
              ALUSrcBSel = 2&#39;bxx; 
              ALUControl = 3&#39;bxxx; 
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx; 
          end
      4&#39;d8: //branch
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;b1; //------srcA: RegRdout1_DFF
              ALUSrcBSel = 2&#39;b00; //------srcB: RegRdout2_DFF 
              ALUControl = 3&#39;b010; //------ALU&#39;s func: sub
              Branch = 1&#39;b1; //------enable update PC if beq 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;b01;  //------select nextPC = ALUResult_DFF(PCBeq)
          end
      4&#39;d9: //jump
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;bx;
              ALUSrcBSel = 2&#39;bxx; 
              ALUControl = 3&#39;bxxx; 
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b1; //------enable update PC 
              PCSrc = 2&#39;b10;  //------select nextPC = PCJump
          end
      4&#39;d10: //addi execute
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;bx; 
              MemtoReg = 1&#39;bx; 
              RegWrite = 1&#39;b0; 
              ALUSrcASel = 1&#39;b1; //------srcA: RegRdout1_DFF
              ALUSrcBSel = 2&#39;b10; //------srcB: SignExtended
              ALUControl = 3&#39;b001; //------ALU&#39;s func: add
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx; 
          end
      4&#39;d11: //addi regwriteback
          begin
              LorD = 1&#39;bx; 
              MemRead = 1&#39;b0; 
              MemWrite = 1&#39;b0; 
              IRWrite = 1&#39;b0; 
              RegDst = 1&#39;b0; //------RegWdaddr: Rt
              MemtoReg = 1&#39;b0; //------RegWdin: ALUResult_DFF
              RegWrite = 1&#39;b1; //------enable Reg write
              ALUSrcASel = 1&#39;bx; 
              ALUSrcBSel = 2&#39;bxx; 
              ALUControl = 3&#39;bxxx; 
              Branch = 1&#39;b0; 
              PCWrite = 1&#39;b0; 
              PCSrc = 2&#39;bxx; 
          end
  endcase         
</code></pre><p>  end</p>
</li>
</ul>
<p>endmodule</p>
<pre><code>- test.v
```verilog
module test;

    // Inputs
    reg clk;
    reg rst_n;

    // Instantiate the Unit Under Test (UUT)
    top uut (
        .clk(clk), 
        .rst_n(rst_n),

    );
    initial begin
        // Initialize Inputs
        clk = 1;

        //
        rst_n = 1;
        #100;

        //
        rst_n = 0;

        // Wait 100 ns for global reset to finish
        #100;
        rst_n = 1;

        forever begin
            #10;
            clk=~clk;
        end
        // Add stimulus here
    end
endmodule
</code></pre></li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2018/05/10/cod/lab6_Multi-CycleCPU/">计算机组成原理上机实验6 多周期CPU</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Lyncien</a></p>
        <p><span>发布时间:</span>2018-05-10, 00:00:00</p>
        <p><span>最后更新:</span>2019-02-19, 19:09:37</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2018/05/10/cod/lab6_Multi-CycleCPU/" title="计算机组成原理上机实验6 多周期CPU">https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/</a>
            <span class="copy-path" data-clipboard-text="原文: https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/　　作者: Lyncien" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2018/05/23/os/File_System/File System/">
                    操作系统阅读报告：大容量存储器与文件系统
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2018/05/04/cod/lab5_SingleCycleCPU/">
                    计算机组成原理上机实验5 单周期CPU
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#实验目的"><span class="toc-text">实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实验平台"><span class="toc-text">实验平台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实验过程（分析）"><span class="toc-text">实验过程（分析）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实验结果"><span class="toc-text">实验结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附录"><span class="toc-text">附录:</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-6 i,
        .toc-level-6 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"计算机组成原理上机实验6 多周期CPU　| Lyncien's homepage　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2018/05/23/os/File_System/File System/" title="上一篇: 操作系统阅读报告：大容量存储器与文件系统">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2018/05/04/cod/lab5_SingleCycleCPU/" title="下一篇: 计算机组成原理上机实验5 单周期CPU">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/02/25/article/pc_first_problem/">并行计算初探</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/17/cp/lab_final/">编译原理课程实验汇报</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/10/article/tea_and_health/">茶与健康</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/09/alg/lab5/">算法基础上机实验五 图搜索BFS算法及存储优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/05/mcps/lab_res/">汇编上机资源</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/03/mcps/lab4/">汇编上机题4</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/02/alg/lab4/">算法基础上机实验四 最佳调度问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/26/mcps/lab3/">汇编上机题3</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/25/alg/lab3/">算法基础上机实验三 最长公共子序列问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/19/mcps/lab2/">汇编上机题2</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/18/alg/lab2/">算法基础上机实验二 红黑树维护算法及其区间树应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/12/mcps/lab1/">汇编上机题1</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/11/alg/lab1/">算法基础上机实验一 求平面上n个顶点的最近点对问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/27/article/learning_and_forgetting/">学习与遗忘</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/15/article/USTC_Hackergame2018_18/">USTC Hackergame2018 之 “加密解密算法”</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/12/article/USTC_Hackergame2018_8/">USTCHackergame2018之"我是谁"</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/14/cod/lab7_Pipeline-CPU/">计算机组成原理上机实验7 流水线CPU</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/13/article/verilog_signed_and_unsigned/">Verilog中的有符号数与无符号数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/23/os/File_System/File System/">操作系统阅读报告：大容量存储器与文件系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/10/cod/lab6_Multi-CycleCPU/">计算机组成原理上机实验6 多周期CPU</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/04/cod/lab5_SingleCycleCPU/">计算机组成原理上机实验5 单周期CPU</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/25/os/Process_Communication&Synchronization&Scheduling/Process Communication&Synchronization&Scheduling/">操作系统阅读报告：进程通信与同步、进程调度</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/19/cod/lab4_FiniteStateMachine/">计算机组成原理上机实验4 有限状态机</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/31/os/Process_Concepts&Operations,Thread/Process Concepts&Operations,Thread/">操作系统阅读报告：进程与线程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/18/os/System_Call/System Call/">操作系统阅读报告：系统调用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/11/os/OS_Summary/OS Summary/">操作系统阅读报告：操作系统概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/09/ds/lab4_ShortestPaths/">数据结构上机题4 最短路径</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/11/ds/lab3_Haffman/">数据结构上机题3 哈夫曼压缩</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/29/ds/lab2_Bank/">数据结构上机题2 模拟银行业务办理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/23/ds/lab1_Polynome/">数据结构上机题1 一元稀疏多项式计算</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/01/article/A_Expression_Evaluation/">A Expression Evaluation</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/14/clp/lab10b/">程序设计II上机实验10B："完美阴阳矩阵"</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/13/clp/lab10a/">程序设计II上机实验10A：杀蚂蚁</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/12/clp/lab9b/">程序设计II上机实验9B：八数码问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/11/clp/lab9a/">程序设计II上机实验9A：算24</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2019 Lyncien
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>