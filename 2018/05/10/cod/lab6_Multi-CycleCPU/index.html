<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Lyncien">



<meta name="description" content="实验目的 实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。 运行一个计算斐波那契数列的程序，初始为3，3。  实验平台 ISE 14.7  实验过程（分析） 模块化设计，主要有以下几个模块  a) alu模块——算术逻辑单元  b) regfile模块——寄存器文件  c)    mux模块和mux4模块——2路和4路选择器  d)">
<meta name="keywords" content="Verilog,COD">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机组成原理上机实验6 多周期CPU">
<meta property="og:url" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/index.html">
<meta property="og:site_name" content="Lyncien&#39;s homepage">
<meta property="og:description" content="实验目的 实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。 运行一个计算斐波那契数列的程序，初始为3，3。  实验平台 ISE 14.7  实验过程（分析） 模块化设计，主要有以下几个模块  a) alu模块——算术逻辑单元  b) regfile模块——寄存器文件  c)    mux模块和mux4模块——2路和4路选择器  d)">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic1.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic2.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic3.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic4.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic5.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic6.png">
<meta property="og:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic7.png">
<meta property="og:updated_time" content="2019-03-14T12:18:02.716Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="计算机组成原理上机实验6 多周期CPU">
<meta name="twitter:description" content="实验目的 实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。 运行一个计算斐波那契数列的程序，初始为3，3。  实验平台 ISE 14.7  实验过程（分析） 模块化设计，主要有以下几个模块  a) alu模块——算术逻辑单元  b) regfile模块——寄存器文件  c)    mux模块和mux4模块——2路和4路选择器  d)">
<meta name="twitter:image" content="https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic1.png">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Lyncien&#39;s homepage" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>计算机组成原理上机实验6 多周期CPU | Lyncien&#39;s homepage</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: false
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head></html>
<script src="/js/head-pic.js" ></script> <!-- head-pic-flash by Lyncien -->
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic" id="head-pic"> <!-- head-pic-flash by Lyncien -->
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Lyncien</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:Lyncien@126.com" title="Email"></a>
                            
                                <a class="fa Leetcode" href="https://leetcode-cn.com/lyncien/" title="Leetcode"></a>
                            
                                <a class="fa Github" href="https://github.com/Lyncien" title="Github"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COD/">COD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Compiler/">Compiler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DP/">DP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DS/">DS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hackergame2018/">Hackergame2018</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MCPS/">MCPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Makefile/">Makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PC/">PC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Verilog/">Verilog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/parallel-computing/">parallel computing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感想/">感想</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/置顶/">置顶</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">林深见鹿</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Lyncien</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic" id="head-pic-mobile"> <!-- head-pic-flash by Lyncien -->
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Lyncien</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:Lyncien@126.com" title="Email"></a>
                            
                                <a class="fa Leetcode" target="_blank" href="https://leetcode-cn.com/lyncien/" title="Leetcode"></a>
                            
                                <a class="fa Github" target="_blank" href="https://github.com/Lyncien" title="Github"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-cod/lab6_Multi-CycleCPU" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/10/cod/lab6_Multi-CycleCPU/" class="article-date">
      <time datetime="2018-05-09T16:00:00.000Z" itemprop="datePublished">2018-05-10</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      计算机组成原理上机实验6 多周期CPU
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/COD/">COD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Verilog/">Verilog</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h2><ol>
<li>实现一个多周期MIPS指令集的CPU，支持包括lw、sw、R-type、addi、beq、bgtz、j等指令。</li>
<li>运行一个计算斐波那契数列的程序，初始为3，3。</li>
</ol>
<h2 id="实验平台"><a href="#实验平台" class="headerlink" title="实验平台"></a>实验平台</h2><ul>
<li>ISE 14.7</li>
</ul>
<h2 id="实验过程（分析）"><a href="#实验过程（分析）" class="headerlink" title="实验过程（分析）"></a>实验过程（分析）</h2><ol>
<li><p>模块化设计，主要有以下几个模块</p>
<p> a) alu模块——算术逻辑单元</p>
<p> b) regfile模块——寄存器文件</p>
<p> c)    mux模块和mux4模块——2路和4路选择器</p>
<p> d)    IP核生成的Mem模块——存放数据段和代码段</p>
<p> e)    nextpclogic模块——计算下一个PC</p>
<p> f)    dff模块——D触发器，用于多周期各段寄存</p>
<p> g)    control模块——FSM控制regfile、IMem、DMem、nextpclogic和alu</p>
<p> h)    top模块——实例化前几个模块，连接各个信号</p>
</li>
<li><p>alu模块使用case语句判断8种操作类型。</p>
</li>
<li><p>regfile模块用组合逻辑读，时序逻辑写。</p>
</li>
<li><p>Mem是同步读，同步写，且由指定coe文件初始化，coe文件的内容是16进制文本，由Mars编译一个汇编代码生成。</p>
</li>
<li><p>nextpclogic模块通过组合逻辑计算出nextPC的值。</p>
</li>
<li><p>dff模块用一个always在时钟沿触发实现非阻塞赋值。</p>
</li>
<li><p>control模块内实现一个有限状态机，三段式实现：</p>
<p> （1）时钟上升沿，改变当前状态，cstate&lt;=nstate</p>
<p> （2）组合逻辑根据当前状态和指令计算次态nstate</p>
<p> （3）时钟下降沿，根据次态nstate，更新各控制信号（将在下一个上升沿起作用），下一周期需要使用的信号置为对应值，不使用的选择信号置x，不使用的使能置0。</p>
<p> 控制信号如下表：</p>
<p> | 状态 | S15 | S0 | S1 | S2 | S3 | S4 | S5 | S6 | S7 | S8 | S9 | S10 | S11 |<br> | — | — | — | — | — | — | — | — | — | — | — | — | — | — |<br> |   功能信号 | Rst | Start | Instr decode | MM addr | MM read | read WB | MM write | R-type EXE | R-type WB | Beq | Addi EXE | Addi WB | Jump |<br> | LorD | 0 | 0 | x | x | 1 | x | 1 | x | x | x | x | x | x |<br> | MemRead |  | 1 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |<br> | MemWrite |  | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 |<br> | IRWrite |  | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |<br> | RegDst |  | x | x | x | x | 0 | x | x | 1 | x | x | 0 | x |<br> | MemtoReg |  | x | x | x | x | 1 | x | x | 0 | x | x | 0 | x |<br> | RegWrite |  | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 1 | 0 | 0 | 1 | 0 |<br> | ALUSrcASel |  | 0 | 0 | 1 | x | x | x | 1 | x | 1 | 1 | x | x |<br> | ALUSrcBSel |  | 01 | 11 | 10 | xx | xx | xx | 00 | xx | 00 | 10 | xx | xx |<br> | ALUControl |  | 001 | 001 | 001 | xxx | xxx | xxx | ② | xxx | 010 | 001 | xxx | xxx |<br> | Branch |  | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 |<br> | PCWrite | 1 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 |<br> | PCSrc | 11① | 00 | xx | xx | xx | xx | xx | xx | xx | 01 | xx | xx | 10 |<br> 注：①rst状态下PCSrc=11，利用4路选择器的剩余1路，置初始nextPC=0.</p>
<p> ②根据Funct具体设置不同的ALUControl<br> ​<br> 状态机如下：</p>
</li>
</ol>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic1.png" alt=""> </p>
<ol start="8">
<li><p>top模块实例化其他所有模块，连接各个信号。</p>
</li>
<li><p>bgtz的实现：bgtz是伪指令（类似地有la和li），不是MIPS指令集的指令，编译时会进行处理，转换为几条指令实现。</p>
<p> 这里我用以下三条指令</p>
<pre><code>slt $t6,$zero,$t1     # if $t1 &gt; 0, that $t6 = 1, else $t6 = 0
addi $t7,$zero,1      # set $t7 = 1
beq $t6,$t7,loop      # jump if $t6 = 1, that is to say, $t1 &gt; 0
</code></pre><p> 实现</p>
<pre><code>bgtz $t1, loop        # repeat if not finished yet.
</code></pre></li>
</ol>
<a id="more"></a>
<ol start="10">
<li><p>ram模块的初始化</p>
<p>IP核选择Block Memory，设置为Single Port RAM，</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic2.png" alt=""> </p>
<p>宽度为32，深度为256</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic3.png" alt=""> </p>
<p>选中Load Init File设置，选择初始化coe文件的路径，</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic4.png" alt=""> </p>
<p>其中coe文件内容为（Text段为0-63，Data段为64-255）</p>
<pre><code>MEMORY_INITIALIZATION_RADIX=16;
MEMORY_INITIALIZATION_VECTOR=
20080100
200d0150
8dad0000
200b0154
8d6b0000
200c0154
8d8c0004
ad0b0000
ad0c0004
21a9fffe
8d0b0000
8d0c0004
016c5020
ad0a0008
21080004
2129ffff
0009702a
200f0001
11cffff7
08000013
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000014
00000003
00000003
…
</code></pre></li>
<li><p>完整的数据通路</p>
<p><img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic5.png" alt=""> </p>
</li>
<li><p>分析结果</p>
<pre><code>.data
fibs: .word   0 : 20        # &quot;array&quot; of  20 words to contain fib values
size: .word  20             # size of &quot;array&quot; 
temp: .word 3 3
.text
      la   $t0, fibs        # load address of array
      la   $t5, size        # load address of size variable
      lw   $t5, 0($t5)      # load array size
      la   $t3, temp        # load 
      lw   $t3, 0($t3)
      la   $t4, temp
      lw   $t4, 4($t4)

      sw   $t3, 0($t0)      # F[0] = $t3
      sw   $t4, 4($t0)      # F[1] = $t4
      addi $t1, $t5, -2     # Counter for loop, will execute (size-2) times
loop: lw   $t3, 0($t0)      # Get value from array F[n] 
      lw   $t4, 4($t0)      # Get value from array F[n+1]
      add  $t2, $t3, $t4    # $t2 = F[n] + F[n+1]
      sw   $t2, 8($t0)      # Store F[n+2] = F[n] + F[n+1] in array
      addi $t0, $t0, 4      # increment address of Fib. number source
      addi $t1, $t1, -1     # decrement loop counter
      slt $t6,$zero,$t1     # if $t1 &gt; 0, that $t6 = 1, else $t6 = 0
      addi $t7,$zero,1      # set $t7 = 1
      beq $t6,$t7,loop      # jump if $t6 = 1, that is to say, $t1 &gt; 0
out:  
    j out
</code></pre><p>完整汇编代码如上，可知程序先向内存数据段读取数组首地址（<code>$t0</code>）和大小（<code>$t5</code>，循环次数），读取并写入f[0]=3, f[1]=3，然后循环18次，执行f[i]=f[i-1]+f[i-2]计算斐波那契数列。</p>
<p>如果CPU编写正确，Mem [0-19]（由于Data和Text在同一个Ram，故实际上是在64-83）内容将是3、3、6、9、15、24、39、63、102、165、267、432、699、1131、1830、2961、4791、7752、12543、20295</p>
<p>Reg内容将是：</p>
<p>$t0：最后一次循环后数组基址——256+4*18=328</p>
<p>$t1：剩余循环次数——0</p>
<p>$t2：最后一次的计算结果——20295</p>
<p>$t3：最后一次的计算数1——7752</p>
<p>$t4：最后一次的计算数2——12543</p>
<p>$t5：数组大小——20</p>
<p>$t6：最后一次不跳转——0</p>
<p>$t7：1</p>
</li>
</ol>
<h2 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h2><ul>
<li><p>仿真结果：</p>
<p>  仿真得Mem和reg数据为</p>
<p>  <img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic6.png" alt=""> </p>
<p>  Mem              </p>
<p>  <img src="//l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/pic7.png" alt=""> </p>
<p>  Regfile</p>
<p>  可见运行结果符合分析。</p>
</li>
</ul>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录:"></a>附录:</h2><ul>
<li><p>编写过程中遇到问题和一些发现</p>
<ol>
<li><p>如果位拼接作为左值，单个变量也要花括号，如</p>
<pre><code>`{{RegDst},{ALUSrc},{MemtoReg},{RegWrite},{MemWrite},{Branch},{ALUOp[1:0]},{Jump}}=9&apos;b100100100;`
</code></pre><p> 当然，本次实验中，我没有用位拼接赋值，这样写一行太长了，也不够清晰。</p>
</li>
<li>“==”会严格匹配每一位，比如module内5位数字比较（一个常量，一个input），但外部传入的是3位的，高位自动拓展好像是x，就导致“==”不成立，这是一个不好发现的问题。</li>
<li>仿真遇到高阻态，多半是这个信号不存在，经常是拼写错了，有时候ise检查不出来。</li>
<li>发现如果Mars的memory configuration设置为默认，则编译后导出代码里面的所有la（给某个寄存器赋值一个32位地址）被翻译为连续两句lui和ori；若memory configuration设置为text at address 0则编译后导出代码里面的所有la被翻译为一句addi。我觉得原因是text地址从0 开始的话，如果text部分较短，地址非0部分未超过16位，那么la只需要给低16位赋值就行了，就可以直接用addi实现（addi指令末16位为立即数）。如果地址是实打实的32位那addi就无能为力了，这时候需要lui给高16位赋值，低16位用ori（ori的rs取$0，作用就和addi一样）。</li>
<li>在top里的wire信号，如果通过control模块（或其他模块）进行控制，那么这个信号不能直接在top里赋初值，要到仿真模块里赋值，不然control里改变这个信号的值时，会变成不确定。</li>
<li>在clk边缘用&lt;=对某信号（如state）进行赋值时，如果同时刻需要对该信号进行判断（如状态机，根据状态以完成对应操作），则判断时信号的值是本次改变前的。（非阻塞赋值的特性体现）</li>
</ol>
</li>
</ul>
<ul>
<li><p>模块源代码</p>
<ul>
<li>top.v</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top( <span class="comment">//顶层模块</span></span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> rst_n,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">wire</span> ALUSrcASel;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">1</span>:<span class="number">0</span>] ALUSrcBSel;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] ALUSrcA;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] ALUSrcB;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">2</span>:<span class="number">0</span>] ALUControl;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] ALUResult;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] ALUResult_DFF; <span class="comment">//加_DFF表示对应D触发器的输出，下同</span></span><br><span class="line">    <span class="keyword">wire</span> Zero;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] SignExtented;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">5</span>:<span class="number">0</span>] RegRdaddr1;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] RegRdout1;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] RegRdout1_DFF;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">5</span>:<span class="number">0</span>] RegRdaddr2;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] RegRdout2;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] RegRdout2_DFF;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">5</span>:<span class="number">0</span>] RegWdaddr;   </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] RegWdin;</span><br><span class="line">    <span class="keyword">wire</span> RegWrite;</span><br><span class="line">    <span class="keyword">wire</span> RegDst;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Memaddr_src; <span class="comment">//这是计算出来的访存地址</span></span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Memaddr; <span class="comment">//这是计算出来的访存地址右移了两位，原因见下面</span></span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Memout;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Memin;</span><br><span class="line">    <span class="keyword">wire</span> MemRead;</span><br><span class="line">    <span class="keyword">wire</span> MemWrite;</span><br><span class="line">    <span class="keyword">wire</span> MemtoReg;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Instr;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Data;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] PC;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] nextPC;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">wire</span> PCEn;</span><br><span class="line">    <span class="keyword">wire</span> PCWrite;</span><br><span class="line">    <span class="keyword">wire</span> LorD;</span><br><span class="line">    <span class="keyword">wire</span> IRWrite;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">5</span>:<span class="number">0</span>] Funct;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] IMM16;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>] Rd;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>] Rt;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>] Rs;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">5</span>:<span class="number">0</span>] Op;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">25</span>:<span class="number">0</span>] JumpIMM;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">1</span>:<span class="number">0</span>] PCSrc;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">wire</span> Branch;</span><br><span class="line">    <span class="comment">//以上信号基本按数据通路图的命名，意义很明显，不多做注释了</span></span><br><span class="line">      </span><br><span class="line">    <span class="comment">//=======================PC========================</span></span><br><span class="line">          </span><br><span class="line">    nextpclogic nextpclogic(PC,PCWrite,PCSrc,JumpIMM,Branch,Zero,ALUResult,ALUResult_DFF,nextPC,PCEn);  </span><br><span class="line">    dff DFFPC(~clk,nextPC,PC,PCEn);</span><br><span class="line">      </span><br><span class="line">    mux MUXPCALUout(LorD,PC,ALUResult_DFF,Memaddr_src);</span><br><span class="line">      </span><br><span class="line">    <span class="comment">//=======================Memory========================</span></span><br><span class="line">    <span class="keyword">assign</span> Memaddr = Memaddr_src &gt;&gt; <span class="number">2</span>;<span class="comment">//&gt;&gt;2是因为这里Mem是每个地址存储4字节，和实际上的（一地址一字节）不一样</span></span><br><span class="line">    Mem Mem(clk,MemWrite,Memaddr,Memin,Memout); </span><br><span class="line">      </span><br><span class="line">    dff DFFInstr(~clk,Memout,Instr,IRWrite);</span><br><span class="line">    dff DFFData(~clk,Memout,Data,<span class="number">1'b1</span>);</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">assign</span> JumpIMM = Instr[<span class="number">25</span>:<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">assign</span> Funct = Instr[<span class="number">5</span>:<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">assign</span> IMM16 = Instr[<span class="number">15</span>:<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">assign</span> Rd = Instr[<span class="number">15</span>:<span class="number">11</span>];</span><br><span class="line">    <span class="keyword">assign</span> Rt = Instr[<span class="number">20</span>:<span class="number">16</span>];</span><br><span class="line">    <span class="keyword">assign</span> Rs = Instr[<span class="number">25</span>:<span class="number">21</span>];</span><br><span class="line">    <span class="keyword">assign</span> Op = Instr[<span class="number">31</span>:<span class="number">26</span>];</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">assign</span> Memin = RegRdout2_DFF;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//=======================Regfile========================</span></span><br><span class="line">    <span class="keyword">assign</span> RegRdaddr1 = Rs;</span><br><span class="line">    <span class="keyword">assign</span> RegRdaddr2 = Rt;</span><br><span class="line">    mux <span class="variable">#(6) MUXRegWdaddr(RegDst,&#123;1'b0,Rt&#125;,&#123;1'b0,Rd&#125;,RegWdaddr)</span>;</span><br><span class="line">    mux MUXMemtoReg(MemtoReg,ALUResult_DFF,Data,RegWdin);</span><br><span class="line">    regfile regfile(clk,rst_n,RegRdaddr1,RegRdout1,RegRdaddr2,RegRdout2,RegWdaddr,RegWdin,RegWrite);</span><br><span class="line">    dff DFFRegRdout1(~clk,RegRdout1,RegRdout1_DFF,<span class="number">1'b1</span>);</span><br><span class="line">    dff DFFRegRdout2(~clk,RegRdout2,RegRdout2_DFF,<span class="number">1'b1</span>);</span><br><span class="line">      </span><br><span class="line">    <span class="comment">//=========================ALU==========================</span></span><br><span class="line">    <span class="keyword">assign</span> SignExtented = &#123;&#123;<span class="number">16</span>&#123;IMM16[<span class="number">15</span>]&#125;&#125;,IMM16&#125;;</span><br><span class="line">    mux MUXALUSrcA(ALUSrcASel,PC,RegRdout1_DFF,ALUSrcA);</span><br><span class="line">    mux4 MUXALUSrcB(ALUSrcBSel,RegRdout2_DFF,<span class="number">4</span>,SignExtented,SignExtented &lt;&lt; <span class="number">2</span>,ALUSrcB);</span><br><span class="line">    alu alu(ALUSrcA,ALUSrcB,&#123;<span class="number">2'b00</span>,&#123;ALUControl&#125;&#125;,ALUResult,Zero,Sign);</span><br><span class="line">    dff DFFALUResult(~clk,ALUResult,ALUResult_DFF,<span class="number">1'b1</span>);</span><br><span class="line">      </span><br><span class="line">    <span class="comment">//=======================Control========================</span></span><br><span class="line">    control control(clk,rst_n,Op,Funct,LorD,MemRead,MemWrite,IRWrite,RegDst,MemtoReg,RegWrite,ALUSrcASel,ALUSrcBSel,ALUControl,Branch,PCWrite,PCSrc,tcstate);   </span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<ul>
<li>alu.v</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">parameter</span> A_NOP =<span class="number">5'h00</span>; <span class="comment">//nop</span></span><br><span class="line"><span class="keyword">parameter</span> A_ADD =<span class="number">5'h01</span>; <span class="comment">//sign_add</span></span><br><span class="line"><span class="keyword">parameter</span> A_SUB =<span class="number">5'h02</span>; <span class="comment">//sign_sub</span></span><br><span class="line"><span class="keyword">parameter</span> A_AND =<span class="number">5'h03</span>; <span class="comment">//and</span></span><br><span class="line"><span class="keyword">parameter</span> A_OR  =<span class="number">5'h04</span>; <span class="comment">//or</span></span><br><span class="line"><span class="keyword">parameter</span> A_XOR =<span class="number">5'h05</span>; <span class="comment">//xor</span></span><br><span class="line"><span class="keyword">parameter</span> A_NOR =<span class="number">5'h06</span>; <span class="comment">//nor</span></span><br><span class="line"><span class="keyword">parameter</span> A_SLT =<span class="number">5'h07</span>; <span class="comment">//slt</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">module</span> alu(</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] alu_a,</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] alu_b,</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">4</span>:<span class="number">0</span>] alu_op,</span><br><span class="line">      <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] alu_out,</span><br><span class="line">       <span class="keyword">output</span> zero</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">assign</span> zero = (alu_out == <span class="number">32'b0</span>)?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">      <span class="keyword">always</span>@(*)</span><br><span class="line">          <span class="keyword">case</span> (alu_op)</span><br><span class="line">              A_NOP: alu_out = <span class="number">0</span>;</span><br><span class="line">              A_ADD: alu_out = alu_a + alu_b;</span><br><span class="line">              A_SUB: alu_out = alu_a - alu_b;</span><br><span class="line">              A_AND: alu_out = alu_a &amp; alu_b;</span><br><span class="line">              A_OR : alu_out = alu_a | alu_b;</span><br><span class="line">              A_XOR: alu_out = alu_a ^ alu_b;</span><br><span class="line">              A_NOR: alu_out = ~(alu_a | alu_b);</span><br><span class="line">              A_SLT: <span class="comment">//if a&lt;b(signed) return 1 else return 0;</span></span><br><span class="line">                  <span class="keyword">begin</span></span><br><span class="line">                      <span class="keyword">if</span>(alu_a[<span class="number">31</span>] == alu_b[<span class="number">31</span>]) alu_out = (alu_a &lt; alu_b) ? <span class="number">32'b1</span> : <span class="number">32'b0</span>;</span><br><span class="line">                      <span class="comment">//同号情况，后面的小于是视为无符号的比较</span></span><br><span class="line">                      <span class="keyword">else</span> alu_out = (alu_a[<span class="number">31</span>] &lt; alu_b[<span class="number">31</span>]) ? <span class="number">32'b0</span> : <span class="number">32'b1</span>;</span><br><span class="line">  <span class="comment">//有符号比较符号</span></span><br><span class="line">                  <span class="keyword">end</span>         </span><br><span class="line">              <span class="keyword">default</span>: ;</span><br><span class="line">          <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<ul>
<li>regfile.v</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> regfile( <span class="comment">//寄存器文件</span></span><br><span class="line">      <span class="keyword">input</span>   clk,</span><br><span class="line">      <span class="keyword">input</span> rst_n,</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">5</span>:<span class="number">0</span>] rAddr1,<span class="comment">//读地址1</span></span><br><span class="line">      <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] rDout1,<span class="comment">//读数据1</span></span><br><span class="line">      <span class="keyword">input</span> [<span class="number">5</span>:<span class="number">0</span>] rAddr2,<span class="comment">//读地址2</span></span><br><span class="line">      <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] rDout2,<span class="comment">//读数据2</span></span><br><span class="line">      <span class="keyword">input</span> [<span class="number">5</span>:<span class="number">0</span>] wAddr,<span class="comment">//写地址</span></span><br><span class="line">      <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] wDin,<span class="comment">//写数据</span></span><br><span class="line">      <span class="keyword">input</span> wEna<span class="comment">//写使能</span></span><br><span class="line">      </span><br><span class="line">  );</span><br><span class="line">      <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] data [<span class="number">0</span>:<span class="number">63</span>];</span><br><span class="line">      <span class="keyword">integer</span> i;</span><br><span class="line">      <span class="keyword">assign</span> rDout1=data[rAddr1];<span class="comment">//读1</span></span><br><span class="line">      <span class="keyword">assign</span> rDout2=data[rAddr2];<span class="comment">//读2</span></span><br><span class="line">      <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n)<span class="comment">//写和复位</span></span><br><span class="line">          <span class="keyword">if</span>(~rst_n)</span><br><span class="line">          <span class="keyword">begin</span></span><br><span class="line">              <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">64</span>; i=i+<span class="number">1</span>) data[i]&lt;=<span class="number">0</span>;</span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">begin</span></span><br><span class="line">              <span class="keyword">if</span>(wEna)</span><br><span class="line">                  data[wAddr]&lt;=wDin;</span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<ul>
<li>nextpclogic.v</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> nextpclogic( <span class="comment">//生成下一个PC</span></span><br><span class="line">      <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] PC,</span><br><span class="line">      <span class="keyword">input</span> PCWrite,</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] PCSrc,</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">25</span>:<span class="number">0</span>] JumpIMM,</span><br><span class="line">      <span class="keyword">input</span> Branch,</span><br><span class="line">      <span class="keyword">input</span> Zero,</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] ALUResult,</span><br><span class="line">      <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] ALUResult_DFF,</span><br><span class="line">      <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] nextPC,</span><br><span class="line">      <span class="keyword">output</span> PCEn</span><br><span class="line">     );</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] ShiftLeft2;</span><br><span class="line">      <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] PCJump;</span><br><span class="line">      <span class="keyword">wire</span> tmp;</span><br><span class="line">      <span class="keyword">assign</span> ShiftLeft2 = JumpIMM &lt;&lt; <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">assign</span> PCJump = &#123;&#123;PC[<span class="number">31</span>:<span class="number">28</span>]&#125;,&#123;&#123;<span class="number">2'b00</span>,JumpIMM&#125;&lt;&lt;<span class="number">2</span>&#125;&#125;;</span><br><span class="line">      mux4 MUXPC(PCSrc,ALUResult,ALUResult_DFF,PCJump,<span class="number">0</span>,nextPC);</span><br><span class="line">      <span class="keyword">and</span>(tmp,Branch,Zero);</span><br><span class="line">      <span class="keyword">or</span>(PCEn,tmp,PCWrite);</span><br><span class="line">      </span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<ul>
<li>dff.v</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> dff #(<span class="keyword">parameter</span> WIDTH = <span class="number">32</span>) ( <span class="comment">//Data Flip-Flop </span></span><br><span class="line">      <span class="keyword">input</span> clk,</span><br><span class="line">      <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] datain,</span><br><span class="line">      <span class="keyword">output</span> <span class="keyword">reg</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] dataout,</span><br><span class="line">      <span class="keyword">input</span> en</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk)</span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">          <span class="keyword">if</span>(en)</span><br><span class="line">              dataout &lt;= datain;</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<ul>
<li>mux.v</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> mux #(<span class="keyword">parameter</span> WIDTH = <span class="number">32</span>)( <span class="comment">//2路选择器</span></span><br><span class="line">    <span class="keyword">input</span> sel,</span><br><span class="line">      <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] d0,</span><br><span class="line">      <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] d1,</span><br><span class="line">      <span class="keyword">output</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] out</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">assign</span> out = (sel == <span class="number">1'b1</span> ? d1 : d0);</span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>mux4.v</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> mux4 #(<span class="keyword">parameter</span> WIDTH = <span class="number">32</span>)( <span class="comment">//4路选择器</span></span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] sel,</span><br><span class="line">    <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] d0,</span><br><span class="line">    <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] d1,</span><br><span class="line">     <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] d2,</span><br><span class="line">     <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] d3,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] out</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">always</span>@(*)</span><br><span class="line">        <span class="keyword">case</span>(sel)</span><br><span class="line">            <span class="number">2'b00</span>: out=d0;</span><br><span class="line">            <span class="number">2'b01</span>: out=d1;</span><br><span class="line">            <span class="number">2'b10</span>: out=d2;</span><br><span class="line">            <span class="number">2'b11</span>: out=d3;</span><br><span class="line">            <span class="keyword">default</span>:;</span><br><span class="line">        <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>control.v</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> control( <span class="comment">//控制模块，各信号的控制</span></span><br><span class="line">    <span class="keyword">input</span> clk,rst_n,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">5</span>:<span class="number">0</span>] Op, <span class="comment">//instr[31:26]</span></span><br><span class="line">    <span class="keyword">input</span> [<span class="number">5</span>:<span class="number">0</span>] Funct,<span class="comment">//instr[5:0]</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> LorD,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> MemRead,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> MemWrite,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> IRWrite,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> RegDst,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> MemtoReg,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> RegWrite,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> ALUSrcASel,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] ALUSrcBSel,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] ALUControl,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> Branch,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> PCWrite,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] PCSrc,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] tcstate</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] cstate;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] nstate;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">assign</span> tcstate=cstate;</span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n)<span class="comment">//上升沿改变状态</span></span><br><span class="line">        <span class="keyword">if</span>(~rst_n) cstate &lt;= <span class="number">4'd15</span>;<span class="comment">//reset状态</span></span><br><span class="line">        <span class="keyword">else</span> cstate &lt;= nstate;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">always</span> @(*)<span class="comment">//计算次态</span></span><br><span class="line">        <span class="keyword">case</span>(cstate)</span><br><span class="line">            <span class="number">4'd15</span>:<span class="comment">//reset</span></span><br><span class="line">                nstate = <span class="number">4'd0</span>;</span><br><span class="line">            <span class="number">4'd0</span>:<span class="comment">//fetch </span></span><br><span class="line">                nstate = <span class="number">4'd1</span>;</span><br><span class="line">            <span class="number">4'd1</span>:<span class="comment">//decode</span></span><br><span class="line">                <span class="keyword">case</span>(Op)</span><br><span class="line">                    <span class="number">6'b000000</span>: nstate = <span class="number">4'd6</span>;<span class="comment">//R type</span></span><br><span class="line">                    <span class="number">6'b100011</span>: nstate = <span class="number">4'd2</span>;<span class="comment">//lw</span></span><br><span class="line">                    <span class="number">6'b101011</span>: nstate = <span class="number">4'd2</span>;<span class="comment">//sw</span></span><br><span class="line">                    <span class="number">6'b000100</span>: nstate = <span class="number">4'd8</span>;<span class="comment">//beq  </span></span><br><span class="line">                    <span class="number">6'b000010</span>: nstate = <span class="number">4'd9</span>;<span class="comment">//jump</span></span><br><span class="line">                    <span class="number">6'b001000</span>: nstate = <span class="number">4'd10</span>;<span class="comment">//addi</span></span><br><span class="line">                <span class="keyword">endcase</span></span><br><span class="line">            <span class="number">4'd2</span>: <span class="comment">//memaddr</span></span><br><span class="line">                <span class="keyword">case</span>(Op)</span><br><span class="line">                    <span class="number">6'b100011</span>: nstate = <span class="number">4'd3</span>;<span class="comment">//lw</span></span><br><span class="line">                    <span class="number">6'b101011</span>: nstate = <span class="number">4'd5</span>;<span class="comment">//sw</span></span><br><span class="line">                <span class="keyword">endcase</span></span><br><span class="line">            <span class="number">4'd3</span>: <span class="comment">//memread</span></span><br><span class="line">                nstate = <span class="number">4'd4</span>;</span><br><span class="line">            <span class="number">4'd4</span>: <span class="comment">//memwriteback</span></span><br><span class="line">                nstate = <span class="number">4'd0</span>;</span><br><span class="line">            <span class="number">4'd5</span>: <span class="comment">//memwrite</span></span><br><span class="line">                nstate = <span class="number">4'd0</span>;</span><br><span class="line">            <span class="number">4'd6</span>: <span class="comment">//execute</span></span><br><span class="line">                nstate = <span class="number">4'd7</span>;</span><br><span class="line">            <span class="number">4'd7</span>: <span class="comment">//aluwriteback</span></span><br><span class="line">                nstate = <span class="number">4'd0</span>;</span><br><span class="line">            <span class="number">4'd8</span>: <span class="comment">//branch</span></span><br><span class="line">                nstate = <span class="number">4'd0</span>;</span><br><span class="line">            <span class="number">4'd9</span>: <span class="comment">//jump</span></span><br><span class="line">                nstate = <span class="number">4'd0</span>;</span><br><span class="line">            <span class="number">4'd10</span>: <span class="comment">//addi execute</span></span><br><span class="line">                nstate = <span class="number">4'd11</span>;</span><br><span class="line">            <span class="number">4'd11</span>: <span class="comment">//addi writeback</span></span><br><span class="line">                nstate = <span class="number">4'd0</span>;</span><br><span class="line">        <span class="keyword">endcase</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据下一状态更改控制信号（有使用的信号将更改并做注释，不使用的选择信号置x,不使用的使能置0）</span></span><br><span class="line">    <span class="comment">//这里虽然在下降沿更改，但信号将在下一周期（上升沿）起作用(也就是同在这个下降沿的操作读取到的信号是改变前的)        </span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">negedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n)<span class="comment">//下降沿时，根据次态，更改信号</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span>(~rst_n) </span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">            LorD = <span class="number">1'b0</span>;</span><br><span class="line">            PCSrc = <span class="number">2'b11</span>; <span class="comment">//nextPC=0; 利用4路选择器的剩余1路</span></span><br><span class="line">            PCWrite = <span class="number">1'b1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">case</span>(nstate)</span><br><span class="line">            <span class="number">4'd0</span>:<span class="comment">//fetch </span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'b0</span>; <span class="comment">//------Memaddr: PC</span></span><br><span class="line">                    MemRead = <span class="number">1'b1</span>; <span class="comment">//------enable Mem read</span></span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b1</span>; <span class="comment">//------enable save Instr</span></span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>;</span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>;</span><br><span class="line">                    ALUSrcASel = <span class="number">1'b0</span>; <span class="comment">//------srcA: PC</span></span><br><span class="line">                    ALUSrcBSel = <span class="number">2'b01</span>; <span class="comment">//------srcB: 4</span></span><br><span class="line">                    ALUControl = <span class="number">3'b001</span>; <span class="comment">//------ALU's func: add</span></span><br><span class="line">                    Branch = <span class="number">1'b0</span>;</span><br><span class="line">                    PCWrite = <span class="number">1'b1</span>; <span class="comment">//------enable update PC</span></span><br><span class="line">                    PCSrc = <span class="number">2'b00</span>; <span class="comment">//------select nextPC=PC+4</span></span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd1</span>:<span class="comment">//decode</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'b0</span>; <span class="comment">//------srcA: PC</span></span><br><span class="line">                    ALUSrcBSel = <span class="number">2'b11</span>; <span class="comment">//------srcB: SignExtended&lt;&lt;2</span></span><br><span class="line">                    ALUControl = <span class="number">3'b001</span>; <span class="comment">//------ALU's func: add</span></span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>;  </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd2</span>: <span class="comment">//memaddr</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'b1</span>; <span class="comment">//------srcA: RegRdout1_DFF</span></span><br><span class="line">                    ALUSrcBSel = <span class="number">2'b10</span>; <span class="comment">//------srcB: SignExtended</span></span><br><span class="line">                    ALUControl = <span class="number">3'b001</span>; <span class="comment">//------ALU's func: add</span></span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>; </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd3</span>: <span class="comment">//memread</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'b1</span>; <span class="comment">//------Memaddr: ALUResult_DFF</span></span><br><span class="line">                    MemRead = <span class="number">1'b1</span>; <span class="comment">//------enable Mem read</span></span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'bx</span>; </span><br><span class="line">                    ALUSrcBSel = <span class="number">2'bxx</span>; </span><br><span class="line">                    ALUControl = <span class="number">3'bxxx</span>; </span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>;  </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd4</span>: <span class="comment">//memwriteback</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'b0</span>; <span class="comment">//------RegWdaddr: Rt</span></span><br><span class="line">                    MemtoReg = <span class="number">1'b1</span>; <span class="comment">//------RegWdin: Memout</span></span><br><span class="line">                    RegWrite = <span class="number">1'b1</span>; <span class="comment">//------enable Reg write</span></span><br><span class="line">                    ALUSrcASel = <span class="number">1'bx</span>; </span><br><span class="line">                    ALUSrcBSel = <span class="number">2'bxx</span>; </span><br><span class="line">                    ALUControl = <span class="number">3'bxxx</span>; </span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>; </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd5</span>: <span class="comment">//memwrite</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'b1</span>; <span class="comment">//------Memaddr: ALUResult_DFF</span></span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b1</span>; <span class="comment">//------enable Mem write</span></span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'bx</span>; </span><br><span class="line">                    ALUSrcBSel = <span class="number">2'bxx</span>; </span><br><span class="line">                    ALUControl = <span class="number">3'bxxx</span>; </span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>; </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd6</span>: <span class="comment">//R type execute</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'b1</span>; <span class="comment">//------srcA: RegRdout1_DFF</span></span><br><span class="line">                    ALUSrcBSel = <span class="number">2'b00</span>; <span class="comment">//------srcB: RegRdout2_DFF</span></span><br><span class="line">                    <span class="keyword">case</span>(Funct) <span class="comment">//------ALU's func: decided by 'Funct'</span></span><br><span class="line">                        <span class="number">6'b100000</span>: ALUControl = <span class="number">5'h01</span>;<span class="comment">//add</span></span><br><span class="line">                        <span class="number">6'b100010</span>: ALUControl = <span class="number">5'h02</span>;<span class="comment">//sub</span></span><br><span class="line">                        <span class="number">6'b100100</span>: ALUControl = <span class="number">5'h03</span>;<span class="comment">//and</span></span><br><span class="line">                        <span class="number">6'b100101</span>: ALUControl = <span class="number">5'h04</span>;<span class="comment">//or</span></span><br><span class="line">                        <span class="number">6'b100110</span>: ALUControl = <span class="number">5'h05</span>;<span class="comment">//xor</span></span><br><span class="line">                        <span class="number">6'b100111</span>: ALUControl = <span class="number">5'h06</span>;<span class="comment">//nor     </span></span><br><span class="line">                        <span class="number">6'b101010</span>: ALUControl = <span class="number">5'h07</span>;<span class="comment">//slt</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>; </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd7</span>: <span class="comment">//aluwriteback</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'b1</span>; <span class="comment">//------RegWdaddr: Rd</span></span><br><span class="line">                    MemtoReg = <span class="number">1'b0</span>; <span class="comment">//------RegWdin: ALUResult_DFF</span></span><br><span class="line">                    RegWrite = <span class="number">1'b1</span>; <span class="comment">//------enable Reg write</span></span><br><span class="line">                    ALUSrcASel = <span class="number">1'bx</span>; </span><br><span class="line">                    ALUSrcBSel = <span class="number">2'bxx</span>; </span><br><span class="line">                    ALUControl = <span class="number">3'bxxx</span>; </span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>; </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd8</span>: <span class="comment">//branch</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'b1</span>; <span class="comment">//------srcA: RegRdout1_DFF</span></span><br><span class="line">                    ALUSrcBSel = <span class="number">2'b00</span>; <span class="comment">//------srcB: RegRdout2_DFF </span></span><br><span class="line">                    ALUControl = <span class="number">3'b010</span>; <span class="comment">//------ALU's func: sub</span></span><br><span class="line">                    Branch = <span class="number">1'b1</span>; <span class="comment">//------enable update PC if beq </span></span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'b01</span>;  <span class="comment">//------select nextPC = ALUResult_DFF(PCBeq)</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd9</span>: <span class="comment">//jump</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'bx</span>;</span><br><span class="line">                    ALUSrcBSel = <span class="number">2'bxx</span>; </span><br><span class="line">                    ALUControl = <span class="number">3'bxxx</span>; </span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b1</span>; <span class="comment">//------enable update PC </span></span><br><span class="line">                    PCSrc = <span class="number">2'b10</span>;  <span class="comment">//------select nextPC = PCJump</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd10</span>: <span class="comment">//addi execute</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'bx</span>; </span><br><span class="line">                    MemtoReg = <span class="number">1'bx</span>; </span><br><span class="line">                    RegWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    ALUSrcASel = <span class="number">1'b1</span>; <span class="comment">//------srcA: RegRdout1_DFF</span></span><br><span class="line">                    ALUSrcBSel = <span class="number">2'b10</span>; <span class="comment">//------srcB: SignExtended</span></span><br><span class="line">                    ALUControl = <span class="number">3'b001</span>; <span class="comment">//------ALU's func: add</span></span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>; </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="number">4'd11</span>: <span class="comment">//addi regwriteback</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                    LorD = <span class="number">1'bx</span>; </span><br><span class="line">                    MemRead = <span class="number">1'b0</span>; </span><br><span class="line">                    MemWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    IRWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    RegDst = <span class="number">1'b0</span>; <span class="comment">//------RegWdaddr: Rt</span></span><br><span class="line">                    MemtoReg = <span class="number">1'b0</span>; <span class="comment">//------RegWdin: ALUResult_DFF</span></span><br><span class="line">                    RegWrite = <span class="number">1'b1</span>; <span class="comment">//------enable Reg write</span></span><br><span class="line">                    ALUSrcASel = <span class="number">1'bx</span>; </span><br><span class="line">                    ALUSrcBSel = <span class="number">2'bxx</span>; </span><br><span class="line">                    ALUControl = <span class="number">3'bxxx</span>; </span><br><span class="line">                    Branch = <span class="number">1'b0</span>; </span><br><span class="line">                    PCWrite = <span class="number">1'b0</span>; </span><br><span class="line">                    PCSrc = <span class="number">2'bxx</span>; </span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">endcase</span>         </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>test.v</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> test;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Inputs</span></span><br><span class="line">    <span class="keyword">reg</span> clk;</span><br><span class="line">    <span class="keyword">reg</span> rst_n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Instantiate the Unit Under Test (UUT)</span></span><br><span class="line">    top uut (</span><br><span class="line">        <span class="variable">.clk</span>(clk), </span><br><span class="line">        <span class="variable">.rst_n</span>(rst_n),</span><br><span class="line">        </span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="comment">// Initialize Inputs</span></span><br><span class="line">        clk = <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        rst_n = <span class="number">1</span>;</span><br><span class="line">        #<span class="number">100</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        rst_n = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Wait 100 ns for global reset to finish</span></span><br><span class="line">        #<span class="number">100</span>;</span><br><span class="line">        rst_n = <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">forever</span> <span class="keyword">begin</span></span><br><span class="line">            #<span class="number">10</span>;</span><br><span class="line">            clk=~clk;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="comment">// Add stimulus here</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2018/05/10/cod/lab6_Multi-CycleCPU/">计算机组成原理上机实验6 多周期CPU</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Lyncien</a></p>
        <p><span>发布时间:</span>2018-05-10, 00:00:00</p>
        <p><span>最后更新:</span>2019-03-14, 20:18:02</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2018/05/10/cod/lab6_Multi-CycleCPU/" title="计算机组成原理上机实验6 多周期CPU">https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/</a>
            <span class="copy-path" data-clipboard-text="原文: https://l-x.me/2018/05/10/cod/lab6_Multi-CycleCPU/　　作者: Lyncien" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2018/05/23/os/File_System/File System/">
                    操作系统阅读报告：大容量存储器与文件系统
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2018/05/04/cod/lab5_SingleCycleCPU/">
                    计算机组成原理上机实验5 单周期CPU
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#实验目的"><span class="toc-text">实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实验平台"><span class="toc-text">实验平台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实验过程（分析）"><span class="toc-text">实验过程（分析）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实验结果"><span class="toc-text">实验结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附录"><span class="toc-text">附录:</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-6 i,
        .toc-level-6 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"计算机组成原理上机实验6 多周期CPU　| Lyncien's homepage　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2018/05/23/os/File_System/File System/" title="上一篇: 操作系统阅读报告：大容量存储器与文件系统">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2018/05/04/cod/lab5_SingleCycleCPU/" title="下一篇: 计算机组成原理上机实验5 单周期CPU">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/9999/01/01/article/my_blog/">博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/01/pc/lab3/">并行计算上机实验三 CUDA实现向量加法和矩阵乘法</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/16/pc/lab2/">并行计算上机实验二 MPI实现π值的计算和PSRS排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/04/leetcode/single-number-iv/">LeetCode题目改编——只出现一次的数字IV</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/02/pc/lab1/">并行计算上机实验一 OpenMP实现π值的计算和PSRS排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/29/article/bit_operation_tips/">C/C++ 位运算总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/02/article/Makefile/">Makefile 使用总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/25/article/pc_first_problem/">并行计算初探</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/21/article/dp_1-5/">动态规划入门（1）</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/17/cp/lab_final/">编译原理课程实验汇报</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/10/article/tea_and_health/">茶与健康</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/09/alg/lab5/">算法基础上机实验五 图搜索BFS算法及存储优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/05/mcps/lab_res/">汇编上机资源</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/03/mcps/lab4/">汇编上机题4</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/02/alg/lab4/">算法基础上机实验四 最佳调度问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/26/mcps/lab3/">汇编上机题3</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/25/alg/lab3/">算法基础上机实验三 最长公共子序列问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/19/mcps/lab2/">汇编上机题2</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/18/alg/lab2/">算法基础上机实验二 红黑树维护算法及其区间树应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/12/mcps/lab1/">汇编上机题1</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/11/alg/lab1/">算法基础上机实验一 求平面上n个顶点的最近点对问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/27/article/learning_and_forgetting/">学习与遗忘</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/15/article/USTC_Hackergame2018_18/">USTC Hackergame2018 之 “加密解密算法”</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/12/article/USTC_Hackergame2018_8/">USTCHackergame2018之"我是谁"</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/14/cod/lab7_Pipeline-CPU/">计算机组成原理上机实验7 流水线CPU</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/13/article/verilog_signed_and_unsigned/">Verilog中的有符号数与无符号数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/23/os/File_System/File System/">操作系统阅读报告：大容量存储器与文件系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/10/cod/lab6_Multi-CycleCPU/">计算机组成原理上机实验6 多周期CPU</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/04/cod/lab5_SingleCycleCPU/">计算机组成原理上机实验5 单周期CPU</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/25/os/Process_Communication&Synchronization&Scheduling/Process Communication&Synchronization&Scheduling/">操作系统阅读报告：进程通信与同步、进程调度</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/19/cod/lab4_FiniteStateMachine/">计算机组成原理上机实验4 有限状态机</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/31/os/Process_Concepts&Operations,Thread/Process Concepts&Operations,Thread/">操作系统阅读报告：进程与线程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/18/os/System_Call/System Call/">操作系统阅读报告：系统调用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/11/os/OS_Summary/OS Summary/">操作系统阅读报告：操作系统概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/09/ds/lab4_ShortestPaths/">数据结构上机题4 最短路径</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/11/ds/lab3_Haffman/">数据结构上机题3 哈夫曼压缩</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/29/ds/lab2_Bank/">数据结构上机题2 模拟银行业务办理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/23/ds/lab1_Polynome/">数据结构上机题1 一元稀疏多项式计算</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/01/article/A_Expression_Evaluation/">C语言表达式计算器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/14/clp/lab10b/">程序设计II上机实验10B："完美阴阳矩阵"</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/13/clp/lab10a/">程序设计II上机实验10A：杀蚂蚁</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/12/clp/lab9b/">程序设计II上机实验9B：八数码问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/11/clp/lab9a/">程序设计II上机实验9A：算24</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2020 Lyncien
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
		
		
			<!-- Highlight.js -->
			<!-- "//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css" -->
			<!-- "http://apps.bdimg.com/libs/highlight.js/9.1.0/styles/default.min.css" -->
			<link rel="stylesheet" href="/js/highlight/styles/vs2015.css">
			<script src="/js/highlight/highlight.pack.js"></script>
			<script>
					hljs.initHighlightingOnLoad();
			</script>
		
		
		
			<div id="clustrmaps-widget"></div> <a href="https://clustrmaps.com/site/1b46r" title="Visit tracker"></a>
		
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>